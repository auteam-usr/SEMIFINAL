# SEMIFINAL

![ПолуФинал_v1](https://github.com/auteam-usr/SEMIFINAL/assets/51791783/6e93dafd-b9a6-482e-9fe8-8395b1d955b5)

|Машина|RAM, ГБ|CPU|HDD/SDD, ГБ|OS
|-|-|-|-|-|
|ISP|1|1|22|Альт JeOS|
|HQ-RTR|1|1|1|Eltex vESR/ecorouter/Linux|
|BR-RTR|1|1|1|Eltex vESR/ecorouter/Linux|
|DC-RTR|1|1|1|Eltex vESR/ecorouter/Linux|
|HQ-SW1|1|1|12|Альт Сервер|
|BR-SW1|1|1|12|Альт Сервер|
|BR-SW2|1|1|12|Альт Сервер|
|DC-SW1|1|1|12|Альт Сервер|

|HQ-SRV1|2|2|20|Альт Сервер|
|HQ-SRV2|2|2|25|Альт Сервер|
|BR-SRV|2|2|20|Альт Сервер|
|DC-SRV1|8|8|100|Альт Виртуализация|
|DC-SRV2|8|8|100|Альт Виртуализация|
|HQ-CLI|2|2|20|Альт Рабочая Станция|
|BR-CLI|2|2|20|Альт Рабочая Станция|
|Итого|34|34|378|

# День 1. Модуль А.
## Расчетное время выполнения модуля – 3 часа.

## _1. Произведите базовую настройку устройств_
- Настройте имена устройств согласно топологии. Используйте полное доменное имя.
-	На L2 и L3 устройствах необходимо создать пользователя sshuser с паролем P@$$w0rd.
-	На маршрутизаторах данный пользователь должен иметь максимальные привилегии.
-	На коммутаторах данный пользователь должен иметь возможность запуска sudo без дополнительной аутентификации.

## _2. Настройка ISP_
-	Настройте адресацию на интерфейсах:
-	Интерфейс, подключенный к магистральному провайдеру, получает адрес по DHCP
-	Интерфейс, к которому подключен HQ-RTR, имеет адрес 4.4.4.1/28
-	Интерфейс, к которому подключен BR-RTR, имеет адрес 5.5.5.1/26
-	Интерфейс, к которому подключен DC-RTR, имеет адрес 6.6.6.1/29
-	Настройте динамическую трансляцию адресов для 3-х сетей.

## _3. Для офиса HQ используется сеть 192.168.100.0/23, для офиса BR - 192.168.200.0/25. Для ЦОД – 172.30.20.0/22.__ 
•	Сеть в офисе HQ и BR необходимо разделить на подсети для каждой VLAN.

## _4. Настройка коммутации._
-	Настройка коммутаторов осуществляется при помощи Open vSwitch.
-	Имена коммутаторов должны совпадать с коротоким именем устройста
-	Сервера в офисах HQ и BR должны находиться во VLAN10, клиенты - VLAN20, также создайте подсеть управления VLAN99.
-	Для ЦОДа разделение сети на VLAN не предусмотрено. 
-	Для серверов офиса HQ выделяется подсеть на не менее 25 устройств, для клиентов офиса HQ - не менее 230 устройств, подсеть управления не более 10 устройств.
-	Для серверов офиса BR выделяется подсеть на не менее 10 устройств, для клиентов офиса HQ - не менее 60 устройств, подсеть управления не более 10 устройств.
-	Шлюзом по умолчания для устройств необходимо указывать последний доступный адрес подсети.

## _5. Между коммутаторами BR-SW1 и BR-SW2 необходимо настроить агрегацию при помощи использования протокола LACP. Должна производиться балансировка трафика, режим балансировки выбирается на ваше усмотрение._

## _6. Между офисами HQ и BR, HQ и ЦОД, BR и ЦОД необходимо сконфигурировать защищенное соединение:_
-	Настройте Route-based IPsec VPN;
-	Используйте алгоритм шифрования AES256, алгоритм аутентификации - SHA2-256;
-	Обеспечьте динамическую маршрутизацию: ресурсы одного офиса должны быть доступны из другого офиса. Для обеспечения динамической маршрутизации используйте link-state протокол на ваше усмотрение.
-	Интерфейсы, где не планируется устанавливать соседство настройте в пассивном режиме.

## _7. Настройка динамической трансляции адресов_
-	Настройте динамическую трансляцию адресов для обоих офисов. 
-	Заблокируйте доступ к Интернету для коммутаторов.
-	Остальные устройства должны иметь доступ к Интернету.

## _8. Настройка межсетевого экрана._
-	Реализуйте функционал межсетевого экрана на HQ-RTR и BR-RTR.
-	Запретите ICMP трафик на пограничные маршрутизаторы из внешних сетей. Трафик из внутренних сетей обоих офисов должен быть разрешен.
-	Обеспечьте доступ по SSH к серверу BR-SRV из внешних сетей. В качестве внешнего порта используйте 65000 на маршрутизаторе BR-RTR.
-	Заблокируйте доступ к youtube и bittorrent на двух маршрутизаторах.

## _9. Настройка протокола динамической конфигурации хостов._
-	Для офиса HQ в качестве сервера DHCP выступает машина HQ-SRV1, офиса BR - BR-SRV.
-	Клиентами являются машины HQ-CLI, HQ-SW, BR-SW1, BR-SW2, BR-CLI.
-	Адрес сети выдаётся согласно топологии;
-	Адрес шлюза по умолчанию - адреса маршрутизаторов HQ-RTR и BR-RTR
-	Адрес DNS-сервера для машины HQ-CLI - адрес сервера HQ-SRV1, для машины BR-CLI - адрес сервера BR-SRV.
-	DNS-суффикс для офисов HQ и BR - au.team.
-	Коммутаторы получают фиксированные адреса от DHCP-сервера.

## _10. Настройка DNS для офисов HQ и BR._
-	Основной DNS-сервер реализован на HQ-SRV2.
-	BR-SRV является подчиненным DNS сервером. 
-	Для всех устройств используется доменное имя au.team.
-	Для всех устройств двух офисов и ЦОД необходимо создать записи A и PTR.
-	В качестве DNS сервера пересылки используйте сервера 94.232.137.104 и 94.232.137.105

|Машина|Запись A|
|-|-|
HQ-RTR|hq-rtr.au.team
BR-RTR|br-rtr.au.team
DC-RTR|dc-rtr.au.team
HQ-SW1|hq-sw1.au.team
BR-SW1|br-sw1.au.team
BR-SW2|br-sw2.au.team
DC-SW1|dc-sw1.au.team
HQ-SRV1|hq-srv1.au.team
HQ-SRV2|hq-srv2.au.team
HQ-CLI|hq-cli.au.team
BR-SRV|br-srv.au.team
BR-CLI|br-cli.au.team
DC-SRV1|dc-srv1.au.team
DC-SRV2|dc-srv2.au.team
DC-SRV3|dc-srv3.au.team

 
# День 1. Модуль Б.
## Расчетное время выполнения модуля – 3 часа.

## _1. Настройте доменный контроллер Samba на машине HQ-SRV2._
-	Создайте 15 пользователей для офиса HQ, имена пользователей формата user№.hq.
-	Создайте 10 пользователей для офиса BR, имена пользователей формата user№.br.
-	Пользователи группы hq имеют право аутентифицироваться на любом клиентском ПК.
-	На BR-CLI могут аутентифицироваться только пользователи группы br и локальные пользователи.
-	Пользователи группы br должны иметь возможность повышать привилегии для выполнения ограниченного набора команд: cat, grep, id.
-	Для всех пользователей домена должны быть реализованы общие каталоги по пути /mnt/Adsamba

## _2. Настройка безопасного удаленного доступа._
-	Для подключения используйте порт 2024;
-	Запретите любое подключение к пользователю root;
-	Ограничьте количество попыток входа до двух;
-	Настройте произвольный баннер при входе.

## _3. Реализуйте механизм инвентаризации ПК через Ansible на BR-SRV:_ 
-	Плейбук должен собирать информацию о рабочих местах:
-	Имя компьютера 
-	Версию ПО - Vim, Chromium. Если ПО отсуствует, плейбук в отчете уведомит об этом фразой - “Программа не установлена”
-	IP-адрес на компьютере 
-	Отчеты, собранные с машин должны быть размещены в том же каталоге на сервере, где и плейбук в папке PC_INFO, в формате .yml. Файл называется именем компьютера, который был инвентаризован 
-	Рабочий каталог Ansible (плейбуки, роли,inventory и т.д.) должны располагаться в /etc/ansible 
-	Плейбук должен собирать информацию о сетевых устройствах:
-	Создавать резервную копию конфигураций.
-	Информацию сохранять в папку NETWORK_INFO

## _4. Разверните Zabbix (Server+Web) на хосте BR-SRV_
-	Для хранения информации используйте базу данных PostgreSQL на хостe HQ-SRV1 
-	Обеспечьте мониторинг доступности всех Linux-узлов сети 
-	Доступ к Web-интерфейсу должен производиться по TLS соединению

## _5. Выполните настройку центра сертификации на базе HQ-SRV1:_
-	Необходимо использовать отечественные алгоритмы шифрования;
-	Сертификаты выдаются на 365 дней;
-	Выдайте сертификаты для всех веб-серверов;

## _6. Запустите сервис MediaWiki на сервере HQ-SRV1._
-	Используйте веб-сервер Apache. В качестве системы управления базами данных используйте MySQL.
-	Создайте базу данных ‘mediawiki’ для использования с MediaWiki.
-	Создайте пользователя ‘wiki’ с паролем ‘WikiP@ssw0rd’ и предоставьте ему права доступа к этой базе данных.
-	Установите последнюю версию MediaWiki/
-	MediaWiki должна быть доступна на порту 8080.
-	Сервер должен быть доступен по HTTPS. Используйте самоподписанные сертификаты.


## _7. Настройка проксирования_
-	Проксирование необходимо настроить на маршрутизаторах HQ-RTR и BR-RTR
-	При попытке перехода на https://www.wikipedia.org/ происходит перенаправление на https://mediawiki.au.team:8080 

## _8. Реализуйте мониторинг по средствам rsyslog._
- Сервер сбора логов расположен на HQ-SRV1
-	Собирать логи необходимо со всех устройств двух офисов
-	Приоритет сообщений должен быть не ниже warning.
-	Все журналы должны находиться в директории /opt. Для каждого хоста должна выделяться своя директория, которая совпадает с именем машины, например, для сервера HQ-SRV2 должна создаваться директория hq-srv2.au.team.
-	Реализуйте ротацию логов:
-	Ротация производится один раз в неделю
-	Логи необходимо сжимать
-	Минимальный размер логов для ротации – 100 МБ
 
# День 2. Модуль С. DevOps
## Расчетное время выполнения модуля – 3 часа.

## _1.	Для центра обработки данных используется сеть 172.30.20.0/22. Адреса узлам назначаются на усмотрение участника._

## _2.	Развертывание приложений в Docker_
-	Создайте ВМ Docker
o	OC Альт Сервер 10.1
o	CPU 2
o	OZU 4 гб
o	Storage 60 гб
-	Установите Docker и Docker Compose.
-	Создайте локальный Docker Registry.
o	В домашней директории хоста создайте файл name.txt и запишите в него строку experts.
o	Напишите Dockerfile для приложения Hello.
	В качестве базового образа используйте alpine
	Сделайте рабочей директорию /hello и скопируйте в неё name.txt
	Контейнер при запуске должен выполнять команду echo, которая выводит сообщение "Hello! Greetings from" и затем содержимое файла name.txt, после чего завершать свою работу.
o	Соберите образ приложения App и загрузите его в ваш Registry.
	Используйте номер версии 1.0 для вашего приложения
	Образ должен быть доступен для скачивания и дальнейшего запуска на локальной машине.
-	Настройте мониторинг с помощью NodeExporter, Prometheus и Grafana в Docker.
o	Создайте в домашней директории пользователя файл monitoring.yml для Docker Compose:
o	Используйте контейнеры NodeExporter, Prometheus и Grafana для сбора, обработки и отображения метрик.
o	Настройте Dashboard для центра обработки данных DC в Grafana, в котором будет отображаться загрузка CPU, объём свободной оперативной памяти и места на диске. Для всех серверов.
o	Интерфейс Grafana должен быть доступен по внешнему адресу на порту 3000.

## _3.	Конфигурация внутренней системы обучения_
-	Создайте ВМ MOODLE
o	CPU 2
o	OZU 2 гб
o	Storage 45 гб
-	На HQ-CLI создайте локального пользователя programmer с паролем P@$$w0rd.
-	Обеспечьте данного пользователя ключом ssh чтобы он входил без пароля на данную ВМ.
-	Сконфигурируйте веб-сервер LMS Apache на сервере ВМ MOODLE:
o	На главной странице должен отражаться номер места
o	Используйте базу данных SQL
o	Создайте пользователей в соответствии с таблицей, пароли у всех пользователей «P@ssw0rd»
-	Добавьте данной ВМ доменное имя (moodle) чтобы пользователи с клиентских устройств имели доступ по доменному имени и защищенному доверенным сертификатом.

|Пользователь|Группа|
|-|-|
Admin|Admin
Manager1|Manager
Manager2|Manager
Manager3|Manager
User1|WS
User2|WS
User3|WS
User4|WS
User5|TEAM
User6|TEAM


## _4.	Реализация системы обработки заявок_
-	Реализайте развёртывание LXC контейнеров OTRS (Znuny).
Подключите к клиентам OTRS пользователей SAMBA AD.
-	Создайте пользователей support который имеет возможность отвечать на заявки.
-	Добавьте данному контейнеру доменное имя (otrs) чтобы пользователи с клиентских устройств имели доступ по доменному имени и защищенному доверенным сертификатом.

